{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\src\\\\app\\\\module\\\\privileges\\\\privileges.container.js\";\nimport React from 'react';\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { connect } from 'react-redux';\nimport { Link } from \"react-router-dom\";\nimport Grid from '@material-ui/core/Grid';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport GroupIcon from '@material-ui/icons/Group';\nimport { Button, LinearProgress, List, ListItem, ListItemText, Paper, Table, TableBody, TableCell, TableHead, TableRow, Typography } from '@material-ui/core';\nimport { addGroupPrivilege, addUserPrivilege, fetchAllGroupsByPrivilege, fetchAllPrivileges, fetchAllUsersByPrivilege, removeGroupPrivilege, removeUserPrivilege } from './privileges.actions';\nimport { handleLogout, hasRole, refreshToken } from '../../shared/app.properties';\nimport Redirect from 'react-router/Redirect';\n\nfunction TabContainer(props) {\n  return React.createElement(Typography, {\n    component: \"div\",\n    style: {\n      padding: 8 * 3\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, props.children);\n}\n\nvar Privileges =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Privileges, _React$Component);\n\n  function Privileges() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Privileges);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Privileges)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedPrivilege: undefined,\n      value: 0,\n      addUserDialogOpen: false\n    };\n    _this.unauthorized = false;\n\n    _this.handleSelectPrivilege = function (event, privilege) {\n      _this.setState({\n        selectedPrivilege: privilege\n      }, function () {\n        _this.props.fetchAllGroupsByPrivilege(_this.state.selectedPrivilege);\n      });\n    };\n\n    _this.handleTabChange = function (event, value) {\n      _this.setState({\n        value: value\n      });\n    };\n\n    _this.removeGroup = function (event, group) {\n      _this.props.removeGroupPrivilege(group, _this.state.selectedPrivilege);\n    };\n\n    _this.removePrivilegeFromUser = function (event, user) {\n      _this.props.removeUserPrivilege(user, _this.state.selectedPrivilege);\n    };\n\n    _this.handleAddUserDialog = function (status) {\n      if (status == 'open') {\n        _this.setState({\n          addUserDialogOpen: true\n        });\n      } else {\n        _this.setState({\n          addUserDialogOpen: false\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Privileges, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\n      var refreshTime = new Date();\n      refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\n\n      if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\n        handleLogout();\n      } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\n        handleLogout();\n      } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\n        refreshToken();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.fetchAllPrivileges();\n\n      if (this.state.selectedPrivilege != undefined) {\n        this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.props.allprivileges != undefined && this.state.selectedPrivilege == undefined) {\n        this.setState({\n          selectedPrivilege: this.props.allprivileges[0]\n        });\n      }\n\n      if (this.state.selectedPrivilege != undefined && this.props.allgroupsdata == undefined) {\n        this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"privileges\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized && React.createElement(Redirect, {\n        to: \"/app/error/unauthorized\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          margin: 30 + \"px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        md: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        style: {\n          margin: 5 + \"px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.props.allprivileges && this.props.allprivileges.map(function (privilege, index) {\n        return React.createElement(ListItem, {\n          button: true,\n          selected: _this2.state.selectedPrivilege && _this2.state.selectedPrivilege.id === privilege.id,\n          onClick: function onClick(event) {\n            return _this2.handleSelectPrivilege(event, privilege);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(ListItemText, {\n          primary: privilege.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }));\n      })))), React.createElement(Grid, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        style: {\n          padding: 20 + \"px\",\n          margin: 5 + \"px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, this.props.loading == true ? React.createElement(LinearProgress, {\n        color: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        style: {\n          height: 5 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        variant: \"h5\",\n        component: \"h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.selectedPrivilege && this.state.selectedPrivilege.name)), React.createElement(Tabs, {\n        value: this.state.value,\n        onChange: this.handleTabChange,\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        value: 0,\n        label: \"Groups\",\n        icon: React.createElement(GroupIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })), this.state.value === 0 && this.state.selectedPrivilege && React.createElement(TabContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/app/privileges/' + this.state.selectedPrivilege.id + '/groups',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        className: \"btns \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(AddIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), \" Add groups\")), React.createElement(Table, {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"ID\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Name\"), React.createElement(TableCell, {\n        style: {\n          width: 100 + \"px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Actions\")))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, this.props.allgroupsdata ? this.props.allgroupsdata.map(function (group, index) {\n        return React.createElement(TableRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, group.id), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, group.name), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick(event) {\n            return _this2.removeGroup(event, group);\n          },\n          variant: \"contained\",\n          color: \"secondary\",\n          \"aria-label\": \"Delete\",\n          className: \"btns pull-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, React.createElement(DeleteIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }))));\n      }) : ''))))))));\n    }\n  }]);\n\n  return Privileges;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    allusersdata: state.privilegesReducer.allusersdata,\n    allgroupsdata: state.privilegesReducer.allgroupsdata,\n    allprivileges: state.privilegesReducer.allprivilegesdata,\n    loading: state.privilegesReducer.loading\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchAllPrivileges: fetchAllPrivileges,\n  fetchAllUsersByPrivilege: fetchAllUsersByPrivilege,\n  fetchAllGroupsByPrivilege: fetchAllGroupsByPrivilege,\n  removeUserPrivilege: removeUserPrivilege,\n  removeGroupPrivilege: removeGroupPrivilege,\n  addUserPrivilege: addUserPrivilege,\n  addGroupPrivilege: addGroupPrivilege\n})(Privileges);","map":{"version":3,"sources":["C:/Users/user/Desktop/Repositories/starter-app/src/app/module/privileges/privileges.container.js"],"names":["React","AddIcon","DeleteIcon","connect","Link","Grid","Tabs","Tab","GroupIcon","Button","LinearProgress","List","ListItem","ListItemText","Paper","Table","TableBody","TableCell","TableHead","TableRow","Typography","addGroupPrivilege","addUserPrivilege","fetchAllGroupsByPrivilege","fetchAllPrivileges","fetchAllUsersByPrivilege","removeGroupPrivilege","removeUserPrivilege","handleLogout","hasRole","refreshToken","Redirect","TabContainer","props","padding","children","Privileges","state","selectedPrivilege","undefined","value","addUserDialogOpen","unauthorized","handleSelectPrivilege","event","privilege","setState","handleTabChange","removeGroup","group","removePrivilegeFromUser","user","handleAddUserDialog","status","refreshTime","Date","setSeconds","getSeconds","localStorage","getItem","JSON","parse","expires_at","allprivileges","allgroupsdata","margin","map","index","id","name","loading","height","width","Component","mapStateToProps","allusersdata","privilegesReducer","allprivilegesdata"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport AddIcon from \"@material-ui/icons/Add\"\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { connect } from 'react-redux'\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport GroupIcon from '@material-ui/icons/Group'\r\nimport {\r\n    Button,\r\n    LinearProgress,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Paper,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport {\r\n    addGroupPrivilege,\r\n    addUserPrivilege,\r\n    fetchAllGroupsByPrivilege,\r\n    fetchAllPrivileges,\r\n    fetchAllUsersByPrivilege,\r\n    removeGroupPrivilege,\r\n    removeUserPrivilege\r\n} from './privileges.actions';\r\nimport { handleLogout, hasRole, refreshToken } from '../../shared/app.properties';\r\nimport Redirect from 'react-router/Redirect';\r\n\r\n\r\nfunction TabContainer(props) {\r\n    return (\r\n        <Typography component=\"div\" style={{ padding: 8 * 3 }}>\r\n            {props.children}\r\n        </Typography>\r\n    );\r\n}\r\n\r\n\r\nclass Privileges extends React.Component {\r\n\r\n    state = {\r\n        selectedPrivilege: undefined,\r\n        value: 0,\r\n        addUserDialogOpen: false\r\n    }\r\n    unauthorized = false;\r\n\r\n    componentWillMount() {\r\n        this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\r\n        let refreshTime = new Date();\r\n        refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\r\n\r\n        if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\r\n            handleLogout()\r\n        } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\r\n            handleLogout()\r\n        } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\r\n            refreshToken()\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchAllPrivileges();\r\n        if (this.state.selectedPrivilege != undefined) {\r\n            this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\r\n        }\r\n    }\r\n\r\n    handleSelectPrivilege = (event, privilege) => {\r\n\r\n\r\n        this.setState({ selectedPrivilege: privilege }, () => {\r\n            this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\r\n\r\n        });\r\n    }\r\n\r\n    handleTabChange = (event, value) => {\r\n\r\n        this.setState({ value });\r\n    };\r\n\r\n    removeGroup = (event, group) => {\r\n        this.props.removeGroupPrivilege(group, this.state.selectedPrivilege);\r\n    }\r\n\r\n    removePrivilegeFromUser = (event, user) => {\r\n        this.props.removeUserPrivilege(user, this.state.selectedPrivilege);\r\n    }\r\n\r\n    handleAddUserDialog = (status) => {\r\n        if (status == 'open') {\r\n            this.setState({ addUserDialogOpen: true });\r\n        } else {\r\n            this.setState({ addUserDialogOpen: false });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.props.allprivileges != undefined && this.state.selectedPrivilege == undefined) {\r\n            this.setState({ selectedPrivilege: this.props.allprivileges[0] });\r\n        }\r\n        if (this.state.selectedPrivilege != undefined && this.props.allgroupsdata == undefined) {\r\n            this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\r\n        }\r\n        return (\r\n            <div className=\"privileges\">\r\n                {localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized &&\r\n                    <Redirect to=\"/app/error/unauthorized\" />\r\n                }\r\n                <div style={{ margin: 30 + \"px\" }}>\r\n                    <Grid container spacing={24}>\r\n                        <Grid md={4}>\r\n                            <Paper style={{ margin: 5 + \"px\" }}>\r\n                                <List>\r\n                                    {\r\n                                        this.props.allprivileges && this.props.allprivileges.map((privilege, index) => {\r\n                                            return (\r\n\r\n                                                <ListItem\r\n                                                    button\r\n                                                    selected={this.state.selectedPrivilege && this.state.selectedPrivilege.id === privilege.id}\r\n                                                    onClick={event => this.handleSelectPrivilege(event, privilege)}\r\n                                                >\r\n                                                    <ListItemText primary={privilege.name} />\r\n                                                </ListItem>\r\n\r\n                                            )\r\n                                        })}\r\n\r\n\r\n                                </List>\r\n\r\n                            </Paper>\r\n                        </Grid>\r\n\r\n                        <Grid md={8}>\r\n                            <Paper style={{ padding: 20 + \"px\", margin: 5 + \"px\" }}>\r\n                                {this.props.loading == true ? <LinearProgress color=\"secondary\" /> :\r\n                                    <div style={{ height: 5 + 'px' }}></div>}\r\n\r\n                                <Typography variant=\"h5\" component=\"h2\"><strong>{this.state.selectedPrivilege && this.state.selectedPrivilege.name}</strong></Typography>\r\n\r\n                                <Tabs\r\n                                    value={this.state.value}\r\n                                    onChange={this.handleTabChange}\r\n                                    indicatorColor=\"primary\"\r\n                                    textColor=\"primary\"\r\n                                >\r\n                                    <Tab value={0} label=\"Groups\" icon={<GroupIcon />} />\r\n                                </Tabs>\r\n\r\n                                {this.state.value === 0 && this.state.selectedPrivilege && <TabContainer>\r\n\r\n                                    <Link to={'/app/privileges/' + this.state.selectedPrivilege.id + '/groups'}>\r\n                                        <Button variant=\"contained\" color=\"primary\" aria-label=\"Add\" className='btns '>\r\n                                            <AddIcon /> Add groups\r\n                                        </Button>\r\n                                    </Link>\r\n\r\n                                    <Table className='table'>\r\n                                        <TableHead>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell>ID</TableCell>\r\n                                                <TableCell>Name</TableCell>\r\n                                                <TableCell style={{ width: 100 + \"px\" }}><p\r\n                                                    className=\"text-center\">Actions</p></TableCell>\r\n                                            </TableRow>\r\n                                        </TableHead>\r\n                                        <TableBody>\r\n                                            {\r\n                                                this.props.allgroupsdata ? this.props.allgroupsdata.map((group, index) => {\r\n                                                    return (\r\n                                                        <TableRow>\r\n                                                            <TableCell>{group.id}</TableCell>\r\n                                                            <TableCell>{group.name}</TableCell>\r\n                                                            <TableCell>\r\n                                                                <Button\r\n                                                                    onClick={event => this.removeGroup(event, group)}\r\n                                                                    variant=\"contained\" color=\"secondary\"\r\n                                                                    aria-label=\"Delete\" className='btns pull-right'>\r\n                                                                    <DeleteIcon />\r\n                                                                </Button>\r\n                                                            </TableCell>\r\n                                                        </TableRow>\r\n                                                    )\r\n                                                }) : ''\r\n                                            }\r\n                                        </TableBody>\r\n                                    </Table>\r\n\r\n\r\n                                </TabContainer>}\r\n                            </Paper>\r\n                        </Grid>\r\n                    </Grid>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        allusersdata: state.privilegesReducer.allusersdata,\r\n        allgroupsdata: state.privilegesReducer.allgroupsdata,\r\n        allprivileges: state.privilegesReducer.allprivilegesdata,\r\n        loading: state.privilegesReducer.loading\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, ({\r\n    fetchAllPrivileges, fetchAllUsersByPrivilege, fetchAllGroupsByPrivilege,\r\n    removeUserPrivilege,\r\n    removeGroupPrivilege,\r\n    addUserPrivilege,\r\n    addGroupPrivilege\r\n}))(Privileges);\r\n\r\n"]},"metadata":{},"sourceType":"module"}