{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\src\\\\app\\\\module\\\\audit\\\\audit.container.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { FormControl, Grid, Input, InputLabel, MenuItem, Paper, Select, Table, TableBody, TableCell, TableHead, TablePagination, TableRow } from \"@material-ui/core\";\nimport { queryAuditLog } from './audit.repo';\nimport { Chip } from '@material-ui/core/es';\nimport format from \"date-fns/format\";\nimport { Redirect } from 'react-router-dom';\nimport { handleLogout, hasRole, refreshToken } from '../../shared/app.properties';\n\nvar AuditContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AuditContainer, _React$Component);\n\n  function AuditContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AuditContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuditContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.unauthorized = false;\n    _this.state = {\n      auditType: \"USERS_AUD\",\n      data: undefined,\n      loading: false\n    };\n\n    _this.handleChangePage = function (event, page) {\n      var newQueryPage = page;\n      queryAuditLog({\n        auditType: _this.state.auditType,\n        page: newQueryPage,\n        size: 10\n      }).then(function (res) {\n        _this.setData(res.data);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.setData = function (data) {\n      console.log(data);\n\n      _this.setState({\n        data: data\n      });\n    };\n\n    _this.handleChangeSelectField = function (name) {\n      return function (event) {\n        var name1 = name;\n        var val = event.target.value;\n        queryAuditLog({\n          auditType: val,\n          page: 0,\n          size: 10\n        }).then(function (res) {\n          _this.setData(res.data);\n        }).catch(function (err) {\n          console.log(err);\n        });\n\n        _this.setState({\n          auditType: val\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(AuditContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {//I need this when I have login system\n      // this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\n      // let refreshTime = new Date();\n      // refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\n      // if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\n      //     handleLogout()\n      // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\n      //     handleLogout()\n      // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\n      //     refreshToken()\n      // }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      queryAuditLog({\n        auditType: this.state.auditType,\n        page: 0,\n        size: 10\n      }).then(function (res) {\n        _this2.setData(res.data);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"audit-log\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized && React.createElement(Redirect, {\n        to: \"/app/error/unauthorized\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        style: {\n          marginLeft: 30 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"AUDIT LOG\"), React.createElement(Paper, {\n        style: {\n          marginLeft: 30 + \"px\",\n          marginRight: 30 + 'px',\n          padding: 10 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        xs: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.state.data && React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        fullWidth: true,\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        shrink: true,\n        htmlFor: \"age-label-placeholder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Select object type\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(Select, {\n        required: true,\n        fullWidth: true,\n        value: this.state.auditType,\n        onChange: this.handleChangeSelectField('auditType'),\n        input: React.createElement(Input, {\n          name: \"auditType\",\n          id: \"auditType-label-placeholder\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }),\n        displayEmpty: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: \"USERS_AUD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"USERS\"), React.createElement(MenuItem, {\n        value: \"GROUPS_AUD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"GROUPS\"), React.createElement(MenuItem, {\n        value: \"SYSTEM_SETTINGS_PROPS_AUD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"SYSTEM SETTINGS\"))), this.state.data && React.createElement(TablePagination, {\n        rowsPerPageOptions: 8,\n        colSpan: 5,\n        count: this.state.data.totalElements,\n        rowsPerPage: this.state.data.size,\n        page: this.state.data.number,\n        onChangePage: this.handleChangePage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        style: {\n          width: 150 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Rev ID\"), React.createElement(TableCell, {\n        style: {\n          width: 500 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Object value\"), React.createElement(TableCell, {\n        style: {\n          width: 300 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Action taker\"), React.createElement(TableCell, {\n        style: {\n          width: 300 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Date and time\"), React.createElement(TableCell, {\n        style: {\n          textAlign: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Action type\"))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.data.content && this.state.data.content.map(function (item) {\n        return React.createElement(TableRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, item[1]), React.createElement(TableCell, {\n          style: {\n            width: 500 + 'px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          style: {\n            wordWrap: 'break-word',\n            width: 470 + 'px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, JSON.stringify(item))), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, item[7]), React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, format(item[item.length - 1], ['dd.MM.yyyy HH:mm:ss'])), React.createElement(TableCell, {\n          style: {\n            textAlign: 'right'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, item[2] == 0 ? React.createElement(Chip, {\n          style: {\n            backgroundColor: 'green',\n            color: 'white'\n          },\n          label: \"CREATE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }) : item[2] == 1 ? React.createElement(Chip, {\n          color: \"primary\",\n          label: \"UPDATE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }) : item[2] == 2 ? React.createElement(Chip, {\n          color: \"secondary\",\n          label: \"DELETE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }) : 'UNKNOWN'));\n      })))))));\n    }\n  }]);\n\n  return AuditContainer;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    data: undefined\n  };\n};\n\nexport default connect(mapStateToProps, {})(AuditContainer);","map":{"version":3,"sources":["C:/Users/user/Desktop/Repositories/starter-app/src/app/module/audit/audit.container.js"],"names":["React","connect","FormControl","Grid","Input","InputLabel","MenuItem","Paper","Select","Table","TableBody","TableCell","TableHead","TablePagination","TableRow","queryAuditLog","Chip","format","Redirect","handleLogout","hasRole","refreshToken","AuditContainer","unauthorized","state","auditType","data","undefined","loading","handleChangePage","event","page","newQueryPage","size","then","res","setData","catch","err","console","log","setState","handleChangeSelectField","name","name1","val","target","value","localStorage","getItem","marginLeft","marginRight","padding","totalElements","number","width","textAlign","content","map","item","wordWrap","JSON","stringify","length","backgroundColor","color","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    FormControl,\r\n    Grid,\r\n    Input,\r\n    InputLabel,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow\r\n} from \"@material-ui/core\";\r\nimport {queryAuditLog} from './audit.repo';\r\nimport {Chip} from '@material-ui/core/es';\r\nimport format from \"date-fns/format\";\r\nimport {Redirect} from 'react-router-dom';\r\nimport {handleLogout, hasRole, refreshToken} from '../../shared/app.properties';\r\n\r\n\r\nclass AuditContainer extends React.Component {\r\n\r\n    unauthorized = false;\r\n\r\n    state = {\r\n        auditType: \"USERS_AUD\",\r\n        data: undefined,\r\n        loading: false\r\n    };\r\n\r\n\r\n    componentWillMount() {\r\n        //I need this when I have login system\r\n        // this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\r\n\r\n        // let refreshTime = new Date();\r\n        // refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\r\n\r\n        // if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\r\n        //     handleLogout()\r\n        // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\r\n        //     handleLogout()\r\n        // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\r\n        //     refreshToken()\r\n        // }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        queryAuditLog({\r\n            auditType: this.state.auditType,\r\n            page: 0,\r\n            size: 10\r\n        }).then(res => {\r\n            this.setData(res.data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    handleChangePage = (event, page) => {\r\n        var newQueryPage = page;\r\n        queryAuditLog({\r\n            auditType: this.state.auditType,\r\n            page: newQueryPage,\r\n            size: 10\r\n        }).then(res => {\r\n            this.setData(res.data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    setData = (data) => {\r\n        console.log(data);\r\n        this.setState({\r\n            data: data\r\n        });\r\n    }\r\n\r\n    handleChangeSelectField = name => event => {\r\n        var name1 = name;\r\n        var val = event.target.value;\r\n\r\n        queryAuditLog({\r\n            auditType: val,\r\n            page: 0,\r\n            size: 10\r\n        }).then(res => {\r\n            this.setData(res.data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n\r\n        this.setState({\r\n            auditType: val\r\n        },\r\n\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <div className=\"audit-log\">\r\n                {localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized &&\r\n                    <Redirect to=\"/app/error/unauthorized\" />\r\n                }\r\n                <h3 style={{ marginLeft: 30 + 'px' }}>AUDIT LOG</h3>\r\n                <Paper style={{ marginLeft: 30 + \"px\", marginRight: 30 + 'px', padding: 10 + 'px' }}>\r\n                    <Grid>\r\n                        <Grid xs={12}>\r\n                            {this.state.data &&\r\n                                <Table>\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n\r\n                                            <FormControl fullWidth={true} margin=\"normal\" >\r\n                                                <InputLabel shrink htmlFor=\"age-label-placeholder\">\r\n                                                    Select object type<br /><br />\r\n                                                </InputLabel>\r\n                                                <Select\r\n                                                    required={true}\r\n                                                    fullWidth={true}\r\n                                                    value={this.state.auditType}\r\n                                                    onChange={this.handleChangeSelectField('auditType')}\r\n                                                    input={<Input name=\"auditType\" id=\"auditType-label-placeholder\" />}\r\n                                                    displayEmpty\r\n                                                >\r\n                                                    <MenuItem value=\"USERS_AUD\">USERS</MenuItem>\r\n                                                    <MenuItem value=\"GROUPS_AUD\">GROUPS</MenuItem>\r\n                                                    <MenuItem value=\"SYSTEM_SETTINGS_PROPS_AUD\">SYSTEM SETTINGS</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n\r\n                                            {this.state.data &&\r\n                                                <TablePagination\r\n                                                    rowsPerPageOptions={8}\r\n                                                    colSpan={5}\r\n                                                    count={this.state.data.totalElements}\r\n                                                    rowsPerPage={this.state.data.size}\r\n                                                    page={this.state.data.number}\r\n                                                    onChangePage={this.handleChangePage}\r\n                                                />\r\n                                            }\r\n\r\n                                        </TableRow>\r\n                                        <TableRow>\r\n\r\n                                            <TableCell style={{ width: 150 + 'px' }}>\r\n                                                Rev ID\r\n                                                    </TableCell>\r\n                                            <TableCell style={{ width: 500 + 'px' }}>\r\n                                                Object value\r\n                                                </TableCell>\r\n                                            <TableCell style={{ width: 300 + 'px' }}>\r\n                                                Action taker\r\n                                                </TableCell>\r\n                                            <TableCell style={{ width: 300 + 'px' }}>\r\n                                                Date and time\r\n                                                </TableCell>\r\n                                            <TableCell style={{ textAlign: 'right' }}>\r\n                                                Action type\r\n                                                    </TableCell>\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {\r\n                                            this.state.data.content && this.state.data.content.map(item =>\r\n                                                <TableRow>\r\n                                                    <TableCell>\r\n                                                        {item[1]}\r\n                                                    </TableCell>\r\n                                                    <TableCell style={{ width: 500 + 'px' }}>\r\n                                                        <p style={{ wordWrap: 'break-word', width: 470 + 'px' }}>{JSON.stringify(item)}</p>\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        {item[7]}\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        {format(item[item.length - 1], ['dd.MM.yyyy HH:mm:ss'])}\r\n                                                    </TableCell>\r\n                                                    <TableCell style={{ textAlign: 'right' }}>\r\n                                                        {item[2] == 0 ?\r\n                                                            <Chip style={{ backgroundColor: 'green', color: 'white' }}\r\n                                                                label='CREATE'></Chip>\r\n                                                            : item[2] == 1 ?\r\n                                                                <Chip color='primary' label='UPDATE'></Chip>\r\n                                                                : item[2] == 2 ?\r\n                                                                    <Chip color='secondary' label='DELETE'></Chip>\r\n                                                                    : 'UNKNOWN'}\r\n                                                    </TableCell>\r\n                                                </TableRow>\r\n                                            )\r\n\r\n                                        }\r\n                                    </TableBody>\r\n                                </Table>\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        data: undefined\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, ({\r\n\r\n}))(AuditContainer);\r\n\r\n"]},"metadata":{},"sourceType":"module"}