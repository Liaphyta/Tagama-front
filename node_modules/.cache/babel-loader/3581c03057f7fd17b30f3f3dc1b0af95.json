{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Repositories\\\\starter-app\\\\src\\\\app\\\\module\\\\audit\\\\audit.container.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { FormControl, Grid, Input, InputLabel, MenuItem, Paper, Select, Table, TableBody, TableCell, TableHead, TablePagination, TableRow } from \"@material-ui/core\";\nimport { queryAuditLog } from './audit.repo';\nimport { Chip } from '@material-ui/core/es';\nimport format from \"date-fns/format\";\nimport { Redirect } from 'react-router-dom';\nimport { handleLogout, hasRole, refreshToken } from '../../shared/app.properties';\n\nclass AuditContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.unauthorized = false;\n    this.state = {\n      auditType: \"USERS_AUD\",\n      data: undefined,\n      loading: false\n    };\n\n    this.handleChangePage = (event, page) => {\n      var newQueryPage = page;\n      queryAuditLog({\n        auditType: this.state.auditType,\n        page: newQueryPage,\n        size: 10\n      }).then(res => {\n        this.setData(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.setData = data => {\n      console.log(data);\n      this.setState({\n        data: data\n      });\n    };\n\n    this.handleChangeSelectField = name => event => {\n      var name1 = name;\n      var val = event.target.value;\n      queryAuditLog({\n        auditType: val,\n        page: 0,\n        size: 10\n      }).then(res => {\n        this.setData(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.setState({\n        auditType: val\n      });\n    };\n  }\n\n  componentWillMount() {//I need this when I have login system\n    // this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\n    // let refreshTime = new Date();\n    // refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\n    // if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\n    //     handleLogout()\n    // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\n    //     handleLogout()\n    // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\n    //     refreshToken()\n    // }\n  }\n\n  componentDidMount() {\n    queryAuditLog({\n      auditType: this.state.auditType,\n      page: 0,\n      size: 10\n    }).then(res => {\n      this.setData(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"audit-log\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized && /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/app/error/unauthorized\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        marginLeft: 30 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, \"AUDIT LOG\"), /*#__PURE__*/React.createElement(Paper, {\n      style: {\n        marginLeft: 30 + \"px\",\n        marginRight: 30 + 'px',\n        padding: 10 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, this.state.data && /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      fullWidth: true,\n      margin: \"normal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: true,\n      htmlFor: \"age-label-placeholder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 49\n      }\n    }, \"Select object type\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 71\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 77\n      }\n    })), /*#__PURE__*/React.createElement(Select, {\n      required: true,\n      fullWidth: true,\n      value: this.state.auditType,\n      onChange: this.handleChangeSelectField('auditType'),\n      input: /*#__PURE__*/React.createElement(Input, {\n        name: \"auditType\",\n        id: \"auditType-label-placeholder\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 60\n        }\n      }),\n      displayEmpty: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      value: \"USERS_AUD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 53\n      }\n    }, \"USERS\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: \"GROUPS_AUD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 53\n      }\n    }, \"GROUPS\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: \"SYSTEM_SETTINGS_PROPS_AUD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 53\n      }\n    }, \"SYSTEM SETTINGS\"))), this.state.data && /*#__PURE__*/React.createElement(TablePagination, {\n      rowsPerPageOptions: 8,\n      colSpan: 5,\n      count: this.state.data.totalElements,\n      rowsPerPage: this.state.data.size,\n      page: this.state.data.number,\n      onChangePage: this.handleChangePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 49\n      }\n    })), /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        width: 150 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 45\n      }\n    }, \"Rev ID\"), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        width: 500 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 45\n      }\n    }, \"Object value\"), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        width: 300 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 45\n      }\n    }, \"Action taker\"), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        width: 300 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 45\n      }\n    }, \"Date and time\"), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 45\n      }\n    }, \"Action type\"))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 37\n      }\n    }, this.state.data.content && this.state.data.content.map(item => /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 53\n      }\n    }, item[1]), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        width: 500 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        wordWrap: 'break-word',\n        width: 470 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 57\n      }\n    }, JSON.stringify(item))), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 53\n      }\n    }, item[7]), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 53\n      }\n    }, format(item[item.length - 1], ['dd.MM.yyyy HH:mm:ss'])), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 53\n      }\n    }, item[2] == 0 ? /*#__PURE__*/React.createElement(Chip, {\n      style: {\n        backgroundColor: 'green',\n        color: 'white'\n      },\n      label: \"CREATE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 61\n      }\n    }) : item[2] == 1 ? /*#__PURE__*/React.createElement(Chip, {\n      color: \"primary\",\n      label: \"UPDATE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 65\n      }\n    }) : item[2] == 2 ? /*#__PURE__*/React.createElement(Chip, {\n      color: \"secondary\",\n      label: \"DELETE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 69\n      }\n    }) : 'UNKNOWN')))))))));\n  }\n\n}\n\nvar mapStateToProps = state => {\n  return {\n    data: undefined\n  };\n};\n\nexport default connect(mapStateToProps, {})(AuditContainer);","map":{"version":3,"sources":["C:/Users/user/Desktop/Repositories/starter-app/src/app/module/audit/audit.container.js"],"names":["React","connect","FormControl","Grid","Input","InputLabel","MenuItem","Paper","Select","Table","TableBody","TableCell","TableHead","TablePagination","TableRow","queryAuditLog","Chip","format","Redirect","handleLogout","hasRole","refreshToken","AuditContainer","Component","unauthorized","state","auditType","data","undefined","loading","handleChangePage","event","page","newQueryPage","size","then","res","setData","catch","err","console","log","setState","handleChangeSelectField","name","name1","val","target","value","componentWillMount","componentDidMount","render","localStorage","getItem","marginLeft","marginRight","padding","totalElements","number","width","textAlign","content","map","item","wordWrap","JSON","stringify","length","backgroundColor","color","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    FormControl,\r\n    Grid,\r\n    Input,\r\n    InputLabel,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow\r\n} from \"@material-ui/core\";\r\nimport {queryAuditLog} from './audit.repo';\r\nimport {Chip} from '@material-ui/core/es';\r\nimport format from \"date-fns/format\";\r\nimport {Redirect} from 'react-router-dom';\r\nimport {handleLogout, hasRole, refreshToken} from '../../shared/app.properties';\r\n\r\n\r\nclass AuditContainer extends React.Component {\r\n\r\n    unauthorized = false;\r\n\r\n    state = {\r\n        auditType: \"USERS_AUD\",\r\n        data: undefined,\r\n        loading: false\r\n    };\r\n\r\n\r\n    componentWillMount() {\r\n        //I need this when I have login system\r\n        // this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\r\n\r\n        // let refreshTime = new Date();\r\n        // refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\r\n\r\n        // if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\r\n        //     handleLogout()\r\n        // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\r\n        //     handleLogout()\r\n        // } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\r\n        //     refreshToken()\r\n        // }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        queryAuditLog({\r\n            auditType: this.state.auditType,\r\n            page: 0,\r\n            size: 10\r\n        }).then(res => {\r\n            this.setData(res.data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    handleChangePage = (event, page) => {\r\n        var newQueryPage = page;\r\n        queryAuditLog({\r\n            auditType: this.state.auditType,\r\n            page: newQueryPage,\r\n            size: 10\r\n        }).then(res => {\r\n            this.setData(res.data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    setData = (data) => {\r\n        console.log(data);\r\n        this.setState({\r\n            data: data\r\n        });\r\n    }\r\n\r\n    handleChangeSelectField = name => event => {\r\n        var name1 = name;\r\n        var val = event.target.value;\r\n\r\n        queryAuditLog({\r\n            auditType: val,\r\n            page: 0,\r\n            size: 10\r\n        }).then(res => {\r\n            this.setData(res.data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        })\r\n\r\n        this.setState({\r\n            auditType: val\r\n        },\r\n\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <div className=\"audit-log\">\r\n                {localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized &&\r\n                    <Redirect to=\"/app/error/unauthorized\" />\r\n                }\r\n                <h3 style={{ marginLeft: 30 + 'px' }}>AUDIT LOG</h3>\r\n                <Paper style={{ marginLeft: 30 + \"px\", marginRight: 30 + 'px', padding: 10 + 'px' }}>\r\n                    <Grid>\r\n                        <Grid xs={12}>\r\n                            {this.state.data &&\r\n                                <Table>\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n\r\n                                            <FormControl fullWidth={true} margin=\"normal\" >\r\n                                                <InputLabel shrink htmlFor=\"age-label-placeholder\">\r\n                                                    Select object type<br /><br />\r\n                                                </InputLabel>\r\n                                                <Select\r\n                                                    required={true}\r\n                                                    fullWidth={true}\r\n                                                    value={this.state.auditType}\r\n                                                    onChange={this.handleChangeSelectField('auditType')}\r\n                                                    input={<Input name=\"auditType\" id=\"auditType-label-placeholder\" />}\r\n                                                    displayEmpty\r\n                                                >\r\n                                                    <MenuItem value=\"USERS_AUD\">USERS</MenuItem>\r\n                                                    <MenuItem value=\"GROUPS_AUD\">GROUPS</MenuItem>\r\n                                                    <MenuItem value=\"SYSTEM_SETTINGS_PROPS_AUD\">SYSTEM SETTINGS</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n\r\n                                            {this.state.data &&\r\n                                                <TablePagination\r\n                                                    rowsPerPageOptions={8}\r\n                                                    colSpan={5}\r\n                                                    count={this.state.data.totalElements}\r\n                                                    rowsPerPage={this.state.data.size}\r\n                                                    page={this.state.data.number}\r\n                                                    onChangePage={this.handleChangePage}\r\n                                                />\r\n                                            }\r\n\r\n                                        </TableRow>\r\n                                        <TableRow>\r\n\r\n                                            <TableCell style={{ width: 150 + 'px' }}>\r\n                                                Rev ID\r\n                                                    </TableCell>\r\n                                            <TableCell style={{ width: 500 + 'px' }}>\r\n                                                Object value\r\n                                                </TableCell>\r\n                                            <TableCell style={{ width: 300 + 'px' }}>\r\n                                                Action taker\r\n                                                </TableCell>\r\n                                            <TableCell style={{ width: 300 + 'px' }}>\r\n                                                Date and time\r\n                                                </TableCell>\r\n                                            <TableCell style={{ textAlign: 'right' }}>\r\n                                                Action type\r\n                                                    </TableCell>\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {\r\n                                            this.state.data.content && this.state.data.content.map(item =>\r\n                                                <TableRow>\r\n                                                    <TableCell>\r\n                                                        {item[1]}\r\n                                                    </TableCell>\r\n                                                    <TableCell style={{ width: 500 + 'px' }}>\r\n                                                        <p style={{ wordWrap: 'break-word', width: 470 + 'px' }}>{JSON.stringify(item)}</p>\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        {item[7]}\r\n                                                    </TableCell>\r\n                                                    <TableCell>\r\n                                                        {format(item[item.length - 1], ['dd.MM.yyyy HH:mm:ss'])}\r\n                                                    </TableCell>\r\n                                                    <TableCell style={{ textAlign: 'right' }}>\r\n                                                        {item[2] == 0 ?\r\n                                                            <Chip style={{ backgroundColor: 'green', color: 'white' }}\r\n                                                                label='CREATE'></Chip>\r\n                                                            : item[2] == 1 ?\r\n                                                                <Chip color='primary' label='UPDATE'></Chip>\r\n                                                                : item[2] == 2 ?\r\n                                                                    <Chip color='secondary' label='DELETE'></Chip>\r\n                                                                    : 'UNKNOWN'}\r\n                                                    </TableCell>\r\n                                                </TableRow>\r\n                                            )\r\n\r\n                                        }\r\n                                    </TableBody>\r\n                                </Table>\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        data: undefined\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, ({\r\n\r\n}))(AuditContainer);\r\n\r\n"]},"metadata":{},"sourceType":"module"}